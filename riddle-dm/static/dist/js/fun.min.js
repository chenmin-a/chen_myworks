function getData(){$.ajax({url:"data.json",async:!1,success:function(t){stepObj=new Step(t),stepObj.initialize()},error:function(){console.log("Network Error!")}})}function stepMask(t){var e="0 "+t*-142+"px";$("#stepMask").show(),$("#stepMask div").css("background-position",e),setTimeout(function(){$("#stepMask").fadeOut()},1200)}function empty(){First=!0,$("#conf").text("请选择答案")}var First=!0,stepObj,Step=function(t){function e(e){stepMask(e),$("#game .stepDiv:lt("+e+")").addClass("on");var s=t[e].option;$("#question").text(t[e].question),$("#answer .option").each(function(t){$(this).text(s.substr(t,1)).removeClass("on"),empty()})}function s(t){t?($("#game .stepDiv").addClass("on"),$("#over").add("#maskOver").show()):$("#maskOver").add("#over2").show()}var o=!1;this.initialize=function(){o?console.log("can not initialize"):(o=0,e(o))},this.check=function(n){n===t[o].answer?(o++,o<t.length?e(o):s(!0)):s(!1)}};$(function(){$("#home_start").click(function(){$("#home").hide(),$("#game").show(),getData()}),$("#answer .option").click(function(){if($(this).hasClass("on")){var t=$(this).text(),e=$("#conf").text();$("#conf").text(e.replace(t,"")),$(this).removeClass("on"),$("#conf").text()||empty()}else if($(this).text()){var t;t=First?$(this).text():$("#conf").text()+$(this).text(),$("#conf").text(t),$(this).addClass("on"),First=!1}}),$("#conf").click(function(){var t=$(this).text();First?console.log(First):stepObj&&t&&stepObj.check(t)}),$("#submit").click(function(){$("#form").val();$.ajax({url:"提交电话号码",success:function(){$("#over #submit").hide(),$("#over .close").show()},error:function(){$("#over #submit").hide(),$("#over .close").show()}})}),$(".close").click(function(){})}),$("#ruleBtn").on("click",function(){$(".home").hide(),$("#rule").add("#maskOver").show()}),$("#rule_to_start").on("click",function(){$("#rule").hide(),$("#maskOver").hide()});